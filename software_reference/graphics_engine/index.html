
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.corpusim.com/software_reference/graphics_engine/">
      
      
        <link rel="prev" href="../design_and_architecture/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.1">
    
    
      
        <title>Graphics Engine - Corpusim Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.45e1311d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="deep_orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2d-sdf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Corpusim Docs" class="md-header__button md-logo" aria-label="Corpusim Docs" data-md-component="logo">
      
  <img src="../../images/Logo_W.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Corpusim Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Graphics Engine
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/Corpusim/corpusim-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Corpusim Docs Repo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Corpusim Docs" class="md-nav__button md-logo" aria-label="Corpusim Docs" data-md-component="logo">
      
  <img src="../../images/Logo_W.png" alt="logo">

    </a>
    Corpusim Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Corpusim/corpusim-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Corpusim Docs Repo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Contributors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributors/about_contributors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About Contributors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributors/tools_and_processes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools and Processes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmaps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Software Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design_and_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design and Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Graphics Engine
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Graphics Engine
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2d-sdf" class="md-nav__link">
    <span class="md-ellipsis">
      2D SDF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-sdf" class="md-nav__link">
    <span class="md-ellipsis">
      3D SDF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pcg" class="md-nav__link">
    <span class="md-ellipsis">
      PCG
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-driven-sdf-pcg" class="md-nav__link">
    <span class="md-ellipsis">
      Data-Driven SDF PCG
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2d-sdf" class="md-nav__link">
    <span class="md-ellipsis">
      2D SDF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-sdf" class="md-nav__link">
    <span class="md-ellipsis">
      3D SDF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pcg" class="md-nav__link">
    <span class="md-ellipsis">
      PCG
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-driven-sdf-pcg" class="md-nav__link">
    <span class="md-ellipsis">
      Data-Driven SDF PCG
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Graphics Engine</h1>

<p>The standard graphics pipeline is a sequence of steps that a 3D object passes through to be rendered on a screen. The 3D object, called a mesh, is made of triangles defined by vertices and edges between them. This mesh is sent through a vertex shader (shader being a program that runs in a graphics card), that can manipulate each vertex. The mesh is then transformed into pixels, known as fragments, and sent to the fragment shader which calculates the color of each pixel. Finally, the fragments are blended together and sent to the frame buffer to be displayed on the screen.</p>
<p>Explicit modeling, as in the standard pipeline, means that some points on the object’s boundary are explicitly listed, and then lines are drawn between those points.</p>
<p>Implicit modeling, by contrast, creates a 3D object by defining functions that imply the boundary of the object’s geometry. This mathematical function can be used to generate a smooth surface analytically and with no need for a mesh. Implicit modeling offers more flexibility and higher accuracy than explicit modeling, enabling nearly infinite magnification and instantaneous modification of geometry, but is more computationally expensive. Figure 1 shows the difference between a circle defined by 8 explicit points (a) and a circle defined by a radius (b).</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="https://lh7-us.googleusercontent.com/zdMRlD5D4bUTAo7FKGWc-v3BHpDRttJ78GV1ZaBSVlhZAfi6XVPH8ZsD3HRyNmumuYPphzUKiYJrvgj__7d1cZ01ZChjqSrHy_0rVOEYwZngTEDhltz-3ZLDE2vCHwpKZih5qTrE6CBR" /></td>
<td><img alt="" src="https://lh7-us.googleusercontent.com/_PNNdORwHXPQUAevqbZjOhOkwnT6QTnz2bTIcWxWpkHSRD-4RqIbHl86x5i_wmf99r9Oif265GxAVwb3w47DM0_uVRh37bmjSkSNLqAGNYJYtKq8Dp_6MDdE96CRgMF2TkJafsvjdsG-" /></td>
</tr>
<tr>
<td>(a)</td>
<td>(b)</td>
</tr>
</tbody>
</table>
<p>Figure 1. Implicit vs. explicit definition of a circle.</p>
<p>In the first experimental prototype for Corpusim’s graphics engine, prior to March 2022, the implicit model was converted to an explicitly defined mesh by using the marching cubes algorithm. That introduced performance problems due to the rapidly changing shapes present in human physiology, as well as the varying levels of detail required for meshes as magnification increased. The geomorphing technique was considered for resolving the latter problem, but ultimately a pure SDF rendering engine was chosen to succeed the first approach.</p>
<h3 id="2d-sdf">2D SDF</h3>
<p>Signed Distance Functions (SDFs) describe geometry implicitly. Shapes are determined at render time, entirely in the fragment shader, using mathematical parameters in a raymarching algorithm. Consequently, the geometric shape does not have a resolution; it can be accurately rendered at any scale. As an analogy, consider 2D rasterized vs. vector graphics.</p>
<p>An SDF is a mathematical function that takes a 2D point as input and returns the signed distance from that point to the closest boundary of a shape. SDFs can generate a wide range of shapes and effects by distorting SDF coordinates (with noise, for example) or boolean operations.</p>
<p><img alt="" src="https://lh7-us.googleusercontent.com/3L7JmxywyVPNI8D0OsH-QXyjmrSBkfBhF-Q-WrK-XZhxREQpBFdXY3Fvk7FkHCfQy91djvHXQ3g0OWmahBmRZ3n_tFVMifqFZUNKDHk66sPOKh2uRhosOzY3zmH5EtGmowCw5TSjb63W" /></p>
<p>Figure 2. Screenshots of an online SDF demonstration.</p>
<p>In Figure 2, the gradient seen in (a) is the expression of distance to a position in the upper left; greater distance is more white. With a step function, we achieve the sharp boundary of (b). A boolean subtraction operation—cutting off a piece of the existing geometry—is shown at 1.5x (c) and 10x (d) magnification.</p>
<p>Any level of magnification on any region of the shape maintains the highest visual fidelity due to the shape’s implicit definition. Boolean operations maintain this perfect resolution.</p>
<p>The effect of magnification is best to observe in a live, animated demonstration, so the graphics of Figure 2 are available to <a href="https://www.shadertoy.com/view/Ddd3Rj">view online</a>. The code-savvy reader is encouraged to learn about SDFs through play; any modifications to the online shader will show in the render pane after pressing the play button (►) or <kbd>alt</kbd> + <kbd>Enter</kbd></p>
<h3 id="3d-sdf">3D SDF</h3>
<p>The 2D concepts of SDFs translate to 3D: A given position in space will determine its distance to the nearest geometry and use that information to render the scene.</p>
<p>The standard approach to rendering a scene defined by 3D SDFs is called raymarching, or sphere tracing. Raymarched SDFs allow for efficient processing of extraordinarily detailed 3D shapes–a feat unattainable using traditional polygonal models (Hart, 1995). Raymarching is also used in optimized methods of finding SDF normals (Falcão, 2008), which enables lighting calculations and the appearance of depth.</p>
<p>A running example of 3D SDF shader code is available online (Scherer, 2023, “SDF 3D”).</p>
<p>As with 2D SDFs, boolean operations cost almost nothing in performance. That functionality has great utility for Corpusim because the cutaway view is an essential element of anatomy study. </p>
<p>Figure 8 shows a recent screenshot of Corpusim’s prototype SDF engine. The top portion of every object has been sliced away with a boolean subtraction operation. The texture is created with noise applied at two octaves of fractal repetition. The open source repository for the graphics research prototype is online (Corpusim, “RDT SDF Engine”). </p>
<p><img alt="" src="https://lh7-us.googleusercontent.com/ckyf5rHfHj7ifeps4tkHlePKuWYQPXkViWQ9hvERmClJmgq4W8p9HXRNuyO_HU6LdfVN0V5y6bWcTiB2Ltxf17T7w1ixKQGCB6UrwCijg9DqGwQgX-u30zZkTCEZDVKe9QEaayFPKfWr" /></p>
<p>Figure 8. Screenshot of Corpusim’s prototype RDT SDF Engine.</p>
<h2 id="pcg">PCG</h2>
<p>Fractals are a good starting point to understand procedural content generation (PCG).</p>
<p>A fractal is a type of mathematical object that has a repeating structure at different scales. The appearance is often irregular, but there is still some underlying scaling law (Peitgen, 2004). By setting a few parameters, such as the size and complexity of the fractal, it is possible to generate an infinite number of unique shapes and structures. Fractals are found throughout nature, with examples including the structure of snowflakes, lightning, and galaxies. However, Benoit Mandelbrot, who pioneered the field, commented “If you have a hammer, use it everywhere you can, but I do not claim that everything is fractal.” (Mandelbrot, 2005). Accordingly, other tools are more prevalent in PCG, often just taking cues from the mathematics of fractals.</p>
<p>Noise is a type of randomness that can be used in procedural content generation. Gaussian noise, also known as white noise, is a sort of “pure” random noise with a normal distribution. Gaussian noise is rarely used for interactive graphics because the natural phenomena being simulated resemble smooth, continuous shapes. Other noise algorithms, such as Perlin noise and Worley noise, are widely used to create realistic terrain and natural environments.</p>
<p>Random input, user input, and other external input sources are frequently used to drive PCG algorithms. This initial content is then combined with predetermined rules, such as the rules of the video game or the desired visual design elements, to create a unique experience for the user.</p>
<p>Several hugely successful video games of recent decades have employed PCG to varying degrees. One prominent example is Minecraft, with its infinitely stretching voxel worlds.</p>
<h2 id="data-driven-sdf-pcg">Data-Driven SDF PCG</h2>
<p>Edward Tufte offers a principle for producing better graphical tools. The reasoning capabilities of users are amplified by improving the quality, relevance, and integrity of the data being presented.</p>
<p>Biological and medical databases are available on the internet and can provide data for use in Corpusim. The National Center for Biotechnology Information (NCBI) is an online repository of biological data that includes a range of databases with information on genes, proteins, and disease. NCBI also provides access to sequence data, gene expression data, and genome annotation data.</p>
<p>With the proliferation of big data infrastructure, the availability of data is no challenge. The structures and management of data as it applies to Corpusim, however, is a research topic.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    2023-12-10
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>